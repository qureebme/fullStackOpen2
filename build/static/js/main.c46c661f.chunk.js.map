{"version":3,"sources":["components/form.js","components/filter.js","components/persons.js","components/notif.js","components/error.js","server.js","App.js","index.js"],"names":["Form","_ref","newName","newNumber","onSubmitHandler","onChangeHandler","onChangeHandler2","react_default","a","createElement","onSubmit","value","onChange","type","Filter","newSearch","onSearchHandler","Persons","showNames","persons","Fragment","style","color","fontSize","backgroundColor","padding","borderStyle","borderRadius","Notif","notifMessage","Error","errorMessage","dataURI","server","axios","get","person","post","delete","id","modifiedPerson","put","then","res","data","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewSearch","_useState9","_useState10","notif","setNotif","_useState11","_useState12","error","setError","useEffect","utils","catch","err","console","log","onClickHandler","eachPerson","window","confirm","concat","name","filter","each","setTimeout","showSearchMatches","toDisplay","toLowerCase","indexOf","map","key","number","onClick","components_notif","components_error","e","searchString","target","components_form","preventDefault","newPerson","trim","checker","currentObj","length","modifiedperson","objectSpread","components_persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c46c661f.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Form = ({newName, newNumber, onSubmitHandler,onChangeHandler,onChangeHandler2}) =>(\r\n  <form onSubmit={onSubmitHandler}>\r\n    <div>\r\n      name: <input value={newName} onChange={onChangeHandler}/><br/><br/>\r\n      number: <input value={newNumber} onChange={onChangeHandler2}/>\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nexport default Form;\r\n","import React from 'react';\r\n\r\nconst Filter = ({newSearch, onSearchHandler}) => (<p>filter shown with <input value={newSearch} onChange={onSearchHandler}/></p>);\r\n\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst Persons = ({showNames, persons, newSearch}) =>(\r\n  <>\r\n    <ul>\r\n      {showNames(newSearch, persons)}\r\n    </ul>\r\n\r\n  </>\r\n)\r\n\r\nexport default Persons;\r\n","import React from 'react';\r\n\r\nconst style = {\r\n    color: 'green',\r\n    fontSize: 25,\r\n    backgroundColor: 'lightgrey',\r\n    padding: 10,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5\r\n}\r\n\r\nconst Notif = ({notifMessage}) => (\r\n    <div style={notifMessage ? style : null}>\r\n        {notifMessage}\r\n    </div>\r\n)\r\n\r\nexport default Notif","import React from 'react';\r\n\r\nconst style = {\r\n    color: 'red',\r\n    fontSize: 25,\r\n    backgroundColor: 'lightgrey',\r\n    padding: 10,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5\r\n}\r\n\r\nconst Error = ({errorMessage}) => (\r\n    <div style={errorMessage ? style : null}>\r\n        {errorMessage}\r\n    </div>\r\n)\r\n\r\nexport default Error","import axios from 'axios';\r\n\r\nconst dataURI = '/api/persons/';\r\n\r\nconst loadStartData = () => {\r\n    let req = axios.get(dataURI)\r\n    return req\r\n}\r\n\r\nconst addPerson = (person) => {\r\n    let req = axios.post(dataURI, person)\r\n    return req\r\n}\r\n\r\nconst deleteContact = (person) => {\r\n    let req = axios.delete(dataURI + person.id)\r\n    return req\r\n}\r\n\r\nconst replaceNumber = (modifiedPerson) => {\r\n    \r\n    let req = axios.put(dataURI + modifiedPerson.id, modifiedPerson)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nexport default {loadStartData, addPerson, deleteContact, replaceNumber}","import React, { useState, useEffect } from 'react'\r\nimport Form from './components/form.js';\r\nimport Filter from './components/filter.js';\r\nimport Persons from './components/persons.js';\r\nimport Notif from './components/notif'\r\nimport Error from './components/error'\r\nimport utils from './server'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]);\r\n  \r\n\r\n  const [ newName, setNewName ] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [newSearch, setNewSearch] = useState('');\r\n  const [notif, setNotif] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    utils.loadStartData()\r\n         .then(res => setPersons(res.data))\r\n         .catch(err => console.log(\"ERROR: \", err))\r\n  },[])\r\n\r\n  const onSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n    let newPerson  = {name: newName.trim(), number: newNumber.trim()};\r\n    \r\n    let checker = persons.filter((currentObj) => currentObj.name.toLowerCase()===newPerson.name.toLowerCase());\r\n    if (checker.length !== 0) {\r\n      if (!window.confirm(`${checker[0].name} is already added to phonebook, replace old number with the new one?`)) return\r\n      else {\r\n        let modifiedperson = {\r\n          ...newPerson,\r\n          id: checker[0].id\r\n      }\r\n            utils.replaceNumber(modifiedperson)\r\n                  .then(data => {\r\n                    setPersons(persons.map(each => each.id === data.id ? data : each));\r\n                    setNewName('');\r\n                    setNewNumber('');\r\n                    setNotif(`Modified ${modifiedperson.name}`);\r\n                    setTimeout(()=>setNotif(null),3000);\r\n                  })\r\n                  .catch((err) => {\r\n                    setError(`${modifiedperson.name} no longer exists on the server`);\r\n                    setTimeout(() => setError(null),3000);\r\n                  })\r\n              }\r\n    }\r\n    else{\r\n\r\n      utils.addPerson(newPerson)\r\n      .then(res => {\r\n        setPersons(persons.concat(res.data));\r\n        setNewName('');\r\n        setNewNumber('');\r\n        setNotif(`Added ${newPerson.name}`);\r\n        setTimeout(()=>setNotif(null), 3000);\r\n      })\r\n      .catch(err => console.log('something really bad happened', err));\r\n    }\r\n  }\r\n\r\n  const onChangeHandler = (e) => setNewName(e.target.value);\r\n  const onChangeHandler2 = (e) => setNewNumber(e.target.value);\r\n\r\n  const onSearchHandler = (e) => {\r\n    let searchString = e.target.value;\r\n    setNewSearch(searchString);\r\n  }\r\n\r\n  const showNames = (newSearch, persons) => {\r\n     if(!newSearch) return persons.map(each => <li key={each.name}>{each.name} {each.number} <button onClick={onClickHandler(each)}>delete</button></li>);\r\n     return showSearchMatches(newSearch, persons);\r\n  }\r\n\r\n  const onClickHandler = (eachPerson) => () => {\r\n    if (window.confirm(`Delete ${eachPerson.name}?`)){\r\n      utils.deleteContact(eachPerson)\r\n          .then(res => {\r\n            setPersons(persons.filter(each => each.id !== eachPerson.id));\r\n            setNotif(`Deleted ${eachPerson.name}`);\r\n                    setTimeout(()=>setNotif(null),3000);\r\n          })\r\n          .catch(err => {\r\n            setError(`${eachPerson.name} no longer exists on the server`);\r\n                    setTimeout(() => setError(null),3000);\r\n          })\r\n    }\r\n  }\r\n\r\n  const showSearchMatches = (newSearch, persons) => {\r\n    if (newSearch){\r\n      let toDisplay =  persons.filter((each)=> each.name.toLowerCase().indexOf(newSearch.toLowerCase()) !== -1);\r\n\r\n      if (toDisplay[0])\r\n          return toDisplay.map(each => <li key={each.name}>{each.name} {each.number} <button onClick={onClickHandler(each)}>delete</button></li>);\r\n      else return \"No matching contact\"\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notif notifMessage={notif ? notif:null}/>\r\n      <Error errorMessage={error ? error:null}/>\r\n      <Filter newSearch={newSearch} onSearchHandler={onSearchHandler} />\r\n      <h3>Add a new contact</h3>\r\n      <Form newName={newName} newNumber={newNumber} onChangeHandler={onChangeHandler}\r\n          onChangeHandler2={onChangeHandler2} onSubmitHandler={onSubmitHandler}/>\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} showNames={showNames} showSearchMatches={showSearchMatches}\r\n          newSearch={newSearch}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App.js'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}